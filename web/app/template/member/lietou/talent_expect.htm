<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=utf-8" /> {yun:}include file="$lietoustyle/public.htm"{/yun}
		<link rel="stylesheet" href="{yun:}$lietou_style{/yun}/css/jianli.css?v={yun:}$config.cachecode{/yun}" type="text/css">
		<link rel="stylesheet" href="{yun:}$lietou_style{/yun}/css/account.css?v={yun:}$config.cachecode{/yun}" type="text/css">
	</head>

	<body>
		{yun:}include file="$lietoustyle/header.htm"{/yun}
		<script src="{yun:}$config.sy_weburl{/yun}/data/plus/job.cache.js?v={yun:}$config.cachecode{/yun}" type="text/javascript"></script>
		<link rel="stylesheet" href="{yun:}$style{/yun}/style/class.public.css?v={yun:}$config.cachecode{/yun}" type="text/css">

		<!--内容部分content-->
		<div class="m_content">
			<div class="wrap my_rebates">
				{yun:}include file="$lietoustyle/left.htm"{/yun}
				<div class="m_inner_youb fr">
                     <div class="lt_m_tit">
           <ul class="lt_m_tit_list">
            <li><a href='index.php?c=talent'>简历库</a></li>
                <li class="lt_m_tit_list_cur"><a href='{yun:}url m=member c=talent act=expect{/yun}'>充实简历库</a> </li>
                   
             </ul>
                   </div>
                   
                   
				
					{yun:}include file="$tplstyle/public_search/index_search.htm"{/yun}
					<iframe id="supportiframe" name="supportiframe" onload="returnmessage('supportiframe');" style="display:none"></iframe>

					<form action="index.php?c=talent&act=saveexpect" method="post" target="supportiframe" onsubmit="return checkexpect();" autocomplete="off" class="layui-form">
						<div class="yun_lt_infobox">
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 姓名：</div>
								<div class="m_name_right reg_re fl">
									<input type="text" value="{yun:}$resume.name{/yun}" name="name" id="uname" class="m_username_text" onBlur="checkonblur('uname');" />
									<div class="resume_tip"><span class="none" id="hiduname"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 性别：</div>
								<div class="m_name_right reg_re fl">
									<input type="hidden" id="sex" name="sex" value="{yun:}$resume.sex{/yun}" /> 
									{yun:}foreach from=$user_sex key=j item=v{/yun}
									<span class="news_expect_sex_t news_expect_sex {yun:}if $j eq $resume.sex{/yun}news_expect_sex_cur{yun:}/if{/yun}" id="sex{yun:}$j{/yun}" onclick="checksex('{yun:}$j{/yun}')">
										<i class="news_expect_icon_sex news_expect_icon_sex{yun:}$j{/yun}"></i>{yun:}$v{/yun}
									</span> 
									{yun:}/foreach{/yun}
									<div class="resume_tip"><span class="none" id="hidsex"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 年龄：</div>
								<div class="m_name_right reg_re fl">
									<input name="age" id="age" type="text" value="{yun:}$resume.age{/yun}" class="m_username_text" onkeyup="this.value=this.value.replace(/[^0-9]/g,'');" maxlength="3" onBlur="checkonblur('age');"/>

									<div class="resume_tip"><span class="none" id="hidage"></span> </div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 现居住地：</div>
								<div class="m_name_right reg_re fl"><input type="text" value="{yun:}$resume.living{/yun}" name="living" class="m_username_text" id="living" onBlur="checkonblur('living');" />
									<div class="resume_tip"><span class="none" id="hidliving"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 最高学历：</div>
								<div class="m_name_right reg_re fl">

									<div class="layui-input-inline" style="width:230px;">
										<select name="edu" lay-filter="edu" id="educid">
											<option value="">请选择最高学历</option>
											{yun:}foreach from=$userdata.user_edu key=j item=v{/yun}
											<option value="{yun:}$v{/yun}" {yun:}if $resume.edu==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$userclass_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
									<div class="resume_tip"><span class="none" id="hideducid"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 工作经验：</div>
								<div class="m_name_right reg_re fl">
									<div class="layui-input-inline" style="width:230px;">
										<select name="exp" lay-filter="exp" id="expid">
											<option value="">请选择工作经验</option>
											{yun:}foreach from=$userdata.user_word key=j item=v{/yun}
											<option value="{yun:}$v{/yun}" {yun:}if $resume.exp==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$userclass_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
									<div class="resume_tip"><span class="none" id="hidexpid"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 手机号码：</div>
								<div class="m_name_right reg_re fl">
									{yun:}if $resume.telstatus==1{/yun}
									<span class="news_phe_ok">{yun:}$resume.linktel{/yun} </span>已认证
									<input type="hidden" id="telstatus" value="1"> 
									{yun:}else{/yun}
									<input name="telphone" id="telphone" type="text" value="{yun:}$resume.linktel{/yun}" onkeyup="this.value=this.value.replace(/[^0-9.]/g,'')" class="m_username_text" onBlur="checkonblur('telphone');" />
									<span id="by_telphone" style="display:none">请正确填写手机号码</span> 
									{yun:}/if{/yun}
									<div class="resume_tip"><span class="none" id="hidtelphone"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 意向岗位：</div>
								<div class="m_name_right reg_re fl">
									<input type="text" value="{yun:}$resume.jobname{/yun}" name="jobname" id="name" class="m_username_text" onBlur="checkonblur('name');" />
									<span class="news_expect_name" style="color:#999">如：销售总监,总经理助理</span>
									<div class="resume_tip"><span class="none" id="hidname"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 从事行业：</div>
								<div class="m_name_right reg_re fl">
									<div class="layui-input-inline" style="width:230px;">
										<select name="hy" lay-filter="hy" id="hyid">
											<option value="">请选择行业</option>
											{yun:}foreach from=$industry_index key=j item=v{/yun}
											<option value="{yun:}$v{/yun}" {yun:}if $resume.hy==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$industry_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
									<div class="resume_tip"><span class="none" id="hidhyid"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 期望薪资：</div>
								<div class="m_name_right reg_re fl">
									<div class="news_expect_xztext_box">
										<input type="text" id="minsalary" name="minsalary" size="5" value="{yun:}$resume.minsalary{/yun}" onkeyup="this.value=this.value.replace(/[^0-9]/g,'')" class="news_expect_xztext " onBlur="checkonblur('minsalary');" placeholder="最低薪资" />
										<span class="job_expectxz_dw">元/月</span>
									</div>
									<span class="news_expect_text_xzline">-</span>
									<div class="news_expect_xztext_box">
										<input type="text" id="maxsalary" name="maxsalary" size="5" placeholder="最高薪资" value="{yun:}$resume.maxsalary{/yun}" onkeyup="this.value=this.value.replace(/[^0-9]/g,'')" class="news_expect_xztext" />
										<span class="job_expectxz_dw">元/月</span>
									</div>
									<div class="resume_tip"><span class="none" id="hidminsalary"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 期望城市：</div>
								<div class="m_name_right reg_re fl">
									<div class="layui-input-inline" style="width:109px;">
										<select name="provinceid" lay-filter="citys" id="provinceid">
											<option value="">请选择</option>
											{yun:}foreach from=$city_index key=j item=v{/yun}
											<option value="{yun:}$v{/yun}" {yun:}if $resume.provinceid==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$city_name[$v]{/yun}</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
									<div class="layui-input-inline" style="width:109px;">
										<select name="cityid" lay-filter="citys" id="cityid">
											<option value="">请选择</option>
											{yun:}foreach from=$city_type[$resume.provinceid] key=j item=v{/yun}
											<option value="{yun:}$v{/yun}" {yun:}if $resume.cityid==$v{/yun} selected{yun:}/if{/yun}>{yun:}$city_name[$v]{/yun}
											</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
									<div class="layui-input-inline" style="width:109px;">
										<select name="three_cityid" lay-filter="" id="three_cityid">
											<option value="">请选择</option>
											{yun:}foreach from=$city_type[$resume.cityid] key=j item=v{/yun}
											<option value="{yun:}$v{/yun}" {yun:}if $resume.three_cityid==$v{/yun} selected{yun:}/if{/yun}>{yun:}$city_name[$v]{/yun}
											</option>
											{yun:}/foreach{/yun}
										</select>
									</div>
									<div class="resume_tip"><span class="none" id="hidprovinceid"></span><span class="none" id="hidcityid"></span></div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 求职状态：</div>
								<div class="m_name_right reg_re fl">
									<div class="layui-form-item">
										<div class="layui-input-inline" style="width:230px;">
											<select name="jobstatus" lay-filter="status" id="statusid">
												<option value="">请选择求职状态</option>
												{yun:}foreach from=$userdata.user_jobstatus key=j item=v{/yun}
												<option value="{yun:}$v{/yun}" {yun:}if $resume.jobstatus==$v{/yun}selected="selected" {yun:}/if{/yun}>{yun:}$userclass_name[$v]{/yun}</option>
												{yun:}/foreach{/yun}
											</select>
										</div>
										<div class="resume_tip"><span class="none" id="hidstatusid"></span></div>
									</div>
								</div>
							</div>
							<div class="m_inner_name">
								<div class="m_name_left fl"><em>*</em> 工作经历：</div>
								<div class="m_name_right reg_re fl">
									<textarea type="text" name="expinfo" id="expinfo" />{yun:}$resume.expinfo{/yun}</textarea>
									<span class="news_expect_name" style="color:#999">注：完整的工作经历是简历推荐成功的核心所在</span>
									<div class="resume_tip"><span class="none" id="hidexpinfo"></span></div>
								</div>
								<div class="m_inner_name">
									<div class="m_name_left fl"><em>*</em> 教育经历：</div>
									<div class="m_name_right reg_re fl">
										<textarea type="text" name="eduinfo" id="eduinfo" class=""  onBlur="checkonblur('eduinfo');"/>{yun:}$resume.eduinfo{/yun}</textarea>
										<span class="news_expect_name" style="color:#999">注：中大型企业很看重全日制统招大学专业教育经历</span>
										<div class="resume_tip"><span class="none" id="hideduinfo"></span></div>
									</div>
									<div class="m_inner_name">
										<div class="m_name_left fl"> 项目经历：</div>
										<div class="m_name_right reg_re fl">
											<textarea type="text" value="" name="projectinfo" id="projectinfo" />{yun:}$resume.projectinfo{/yun}</textarea>
											<span class="news_expect_name" style="color:#999">注：有相应的项目经历会为您的推荐加分</span>
											
										</div>
										<div class="m_inner_name">
											<div class="m_name_left fl"> 技能特长：</div>
											<div class="m_name_right reg_re fl">
												<textarea type="text" value="" name="skillinfo" id="skillinfo" />{yun:}$resume.skillinfo{/yun}</textarea>
												<span class="news_expect_name" style="color:#999">注：擅长方向、技术特长、相关的技能证书描述更能获得企业的青睐</span>
											</div>
											<div class="m_inner_name">
												<div class="m_name_left fl">&nbsp;</div>
												<div class="m_name_right reg_re fl"><input type="submit" class="m_inner_button" value="保存" name="submit" style="width:180px;">
													<input id="save" name="save" value="{yun:}$resume.name{/yun}" type="hidden" />
													<input id="id" name='id' value="{yun:}$resume.id{/yun}" type="hidden" />
													<input type="hidden" id="cionly" name="cionly" value="{yun:}if empty($city_type){/yun}1{yun:}/if{/yun}">
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
				</div>
			</div>
			</form>
			<script type="text/javascript" src="{yun:}$config.sy_weburl{/yun}/js/member_public.js?v={yun:}$config.cachecode{/yun}"></script>
			<script src='{yun:}$config.sy_weburl{/yun}/data/plus/city.cache.js?v={yun:}$config.cachecode{/yun}'></script>
			<script src="{yun:}$config.sy_weburl{/yun}/js/ueditor/ueditor.config.js?v={yun:}$config.cachecode{/yun}"></script>
			<script src="{yun:}$config.sy_weburl{/yun}/js/ueditor/ueditor.all.min.js?v={yun:}$config.cachecode{/yun}"></script>
			<script src="{yun:}$config.sy_weburl{/yun}/js/class.public.js?v={yun:}$config.cachecode{/yun}" type="text/javascript"></script>
			<script>
			
				var expinfo=UE.getEditor('expinfo', {
					toolbars: [
						['Source', '|', 'Bold', 'italic', 'underline', 'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist', 'insertunorderedlist']
					],
					wordCount: false,
					elementPathEnabled: false,
					initialFrameHeight: 150
				});
				var eduinfo=UE.getEditor('eduinfo', {
					toolbars: [
						['Source', '|', 'Bold', 'italic', 'underline', 'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist', 'insertunorderedlist']
					],
					wordCount: false,
					elementPathEnabled: false,
					initialFrameHeight: 150
				});
				UE.getEditor('projectinfo', {
					toolbars: [
						['Source', '|', 'Bold', 'italic', 'underline', 'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist', 'insertunorderedlist']
					],
					wordCount: false,
					elementPathEnabled: false,
					initialFrameHeight: 150
				});

				UE.getEditor('skillinfo', {
					toolbars: [
						['Source', '|', 'Bold', 'italic', 'underline', 'removeformat', '|', 'justifyleft', 'justifycenter', 'justifyright', 'insertorderedlist', 'insertunorderedlist']
					],
					wordCount: false,
					elementPathEnabled: false,
					initialFrameHeight: 150
				});
				expinfo.addListener('blur',function(editor){checkonblur('expinfo');});
				eduinfo.addListener('blur',function(editor){checkonblur('eduinfo');});
				
				layui.use(['layer', 'form', 'laydate'], function() {
					var layer = layui.layer,
						form = layui.form,
						laydate = layui.laydate,
						$ = layui.$;
					laydate.render({
						elem: '#birthday',
						max: -5113,
						value:'1990-01-01'
					});
					$("input[name='type']").each(function() {
						$(this).next().click(function() {
							var val = $(this).prev().val();
							if(val) {
								$("#typeid").val(val);
							}
						});
					});
					form.on('select(edu)', function(data){
					  checkonblur('educid');
					});
					form.on('select(exp)', function(data){
					  checkonblur('expid');
					});
					form.on('select(hy)', function(data){
					  checkonblur('hyid');
					});
					if(ct.length>0 && ct!='new Array()'){
					 form.on('select(citys)', function(data){
						var html = "<option value=''>请选择</option>";
						if(data.value){
							$.each(ct[data.value], function(k, v){
								html += "<option value='" + v + "'>" + cn[v] + "</option>";
							  });
						}
						if(data.elem.name=='provinceid'){
						  $("#cityid").html(html);
						  $("#three_cityid").html("<option value=''>请选择</option>");
						}else{
						  $("#cityshowth").show();
						  $("#three_cityid").html(html);
						  checkonblur('cityid');
						}
						form.render('select');
					  });
					}else{
						if($("#cityid")){
					      $("#cityid").parent().remove();
					    }
					    if($("#three_cityid")){
					      $("#three_cityid").parent().remove();
					    }
					    form.on('select(citys)', function(data){
					    	checkonblur('provinceid');
					    });
					    form.render('select');
					}
					form.on('select(status)', function(data){
					  checkonblur('statusid');
					});
				});
				
				function checkexpect() {
					var cionly	=	$.trim($("#cionly").val());
					var arrayObj = new Array();
					arrayObj.push('name');
					checkonblur("name");
					arrayObj.push('hyid');
					checkonblur("hyid");
					arrayObj.push('maxsalary');
					checkonblur("maxsalary");
					arrayObj.push('minsalary');
					checkonblur("minsalary");

					if(cionly=='1'){
						var cityid='provinceid';
					}else{
						var cityid='cityid';
					}
					
					arrayObj.push(cityid);
					checkonblur(cityid);


					arrayObj.push('statusid');
					checkonblur("statusid");
					arrayObj.push('uname');
					checkonblur("uname");
					arrayObj.push('sex');
					checkonblur("sex");
					arrayObj.push('age');
					checkonblur("age");
					arrayObj.push('educid');
					checkonblur("educid");
					arrayObj.push('expid');
					checkonblur("expid");
					arrayObj.push('eduinfo');
					checkonblur("eduinfo");
					arrayObj.push('expinfo');
					checkonblur("expinfo");
					arrayObj.push('telphone');
					checkonblur("telphone");
					arrayObj.push('living');
					checkonblur("living");
					for(i = 0; i < arrayObj.length; i++) {
						if(exitsdate(arrayObj[i]) == false) {
							return false;
						}
					}
				}

				function checkonblur(id) {
					var obj = $.trim($("#" + id).val());
					var msg;
					if(id == "name") {
						if(obj == "") {
							msg = '请填写意向岗位！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "hyid") {
						if(obj == "") {
							msg = '请选择从事行业！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "maxsalary") {
						var minsalary = parseInt($('#minsalary').val());
						if(parseInt(obj) > 0 && parseInt(obj) < minsalary) {
							msg = '最高薪资必须大于最低薪资！';
							showblurmsg('minsalary', "0", msg);
						} else {
							msg = '';
							showblurmsg('minsalary', "1", msg);
							$("#" + id).attr('date', '1');
						}
					}
					if(id == "minsalary") {
						var maxsalary = parseInt($('#maxsalary').val());
						if(obj == "" || obj == "最低薪资") {
							msg = '请填写期望薪资！';
							showblurmsg(id, "0", msg);
						} else if(parseInt(obj) > maxsalary) {
							msg = '最高薪资必须大于最低薪资！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}

					if(id == "cityid" || id == "provinceid") {
						
						if(obj == "") {
							msg = '请选择期望城市！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "statusid") {
						if(obj == "") {
							msg = '请选择求职状态！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "uname") {
						if(obj == "") {
							msg = '请输入真实姓名！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "sex") {
						if(obj == "") {
							msg = '请选择性别！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "age") {
						if(obj == "") {
							msg = '请填写年龄！';
							showblurmsg(id, "0", msg);
						} else if(obj > 80 || obj < 16) {
							msg = '年龄必须在16到80之间！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "educid") {
						if(obj == "") {
							msg = '请选择最高学历！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "expid") {
						if(obj == "") {
							msg = '请选择工作经验！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "eduinfo") {
						var obj = UE.getEditor('eduinfo').getContent();
						if(obj == "") {
							msg = '请选择教育经历！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "expinfo") {
						var obj = UE.getEditor('expinfo').getContent();
						if(obj == "") {
							msg = '请选择工作经历！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
					if(id == "telphone") {
						var telstatus = $('#telstatus').val();
						if(telstatus == '1') {
							msg = '';
							showblurmsg(id, "1", msg);
						} else {
							if(obj == '') {
								msg = "请输入手机号码！";
								showblurmsg(id, "0", msg);
							} else if(!isjsMobile(obj)) {
								msg = "手机号码格式错误！";
								showblurmsg(id, "0", msg);
							} else {
								loadlayer();
								$.ajax({
									type: "POST",
									url: weburl + "/member/index.php?c=talent&act=regmoblie",
									data: {
										telphone: obj
									},
									dataType: "text",
									async: false,
									success: function(data) {
										layer.closeAll('loading');
										if(data == 0) {
											msg = '';
											showblurmsg(id, "1", msg);
											return true;
										} else {
											msg = "号码已存在！";
											showblurmsg(id, "0", msg);
										}
									}
								});
							}
						}
					}
					if(id == "living") {
						if(obj == "") {
							msg = '请输入现居住地！';
							showblurmsg(id, "0", msg);
						} else {
							msg = '';
							showblurmsg(id, "1", msg);
						}
					}
				}

				function showblurmsg(id, type, msg) {
					$("#hid_" + id).show();
					$("#hid" + id).html(msg);
					if(type == "0") {
						$("#hid" + id).attr("class", "");
						$("#" + id).removeClass("resume_tipfalse");
						$("#" + id).attr('date', '0');
						return false;
					} else {
						$("#hid" + id).attr("class", "resume_tipok");
						$("#" + id).addClass("resume_tipfalse");
						$("#" + id).attr('date', '1');
					}
				}

				function exitsdate(id) {
					if(document.getElementById(id)) {
						if($('#' + id).attr('date') != '1') {
							return false;
						} else {
							return true;
						}
					} else {
						return true;
					}
				}

				function checksex(id) {
					$(".news_expect_sex").removeClass('news_expect_sex_cur');
					$("#sex" + id).addClass('news_expect_sex_cur');
					$("#sex").val(id);
					checkonblur('sex');
				}
			</script>
			{yun:}include file="$lietoustyle/footer.htm"{/yun}