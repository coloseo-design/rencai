{yun:}include file="$wapstyle/member/lheader.htm"{/yun} 
<div class="yun_usermember_financecombg">
<div class="yun_usermember_integral">目前已有{yun:}$config.integral_pricename{/yun}：<span class="yun_usermember_integral_n">{yun:}$statis.integral{/yun}</span>{yun:}$config.integral_priceunit{/yun}，仍需继续努力！</div></div>
<div class="yun_usermember_integral_b">
<div class="yun_usermember_integral_line"></div>
<ul class="yun_usermember_integral_nav">
<li><a href="index.php?c=consume"><i class="yun_usermember_integral_nav_icon yun_usermember_integral_nav_iconmx"></i>消费明细</a></li>
<li><a href="index.php?c=integral_reduce"><i class="yun_usermember_integral_nav_icon yun_usermember_integral_nav_icongz"></i>消费规则</a></li>
<li><a href="{yun:}url m=wap c='redeem'{/yun}"><i class="yun_usermember_integral_nav_icon yun_usermember_integral_nav_iconsc"></i>{yun:}$config.integral_pricename{/yun}商城</a></li>
<li><a href="index.php?c=reward_list"><i class="yun_usermember_integral_nav_icon yun_usermember_integral_nav_icondh"></i>兑换记录</a></li>
</ul>
</div>

<div class="yun_usermember_integral_box">
	<div class="yun_usermember_integral_box_h1">我的任务</div>

	<ul class="yun_usermember_integral_list">
		<li>
		<i class="yun_integral_icon yun_integral_icon_qd"></i>
		<div class="yun_integral_name">完成签到</div>
		<div class="yun_integral_n">+{yun:}$config.integral_signin{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
		{yun:}if $statusList.signin {/yun}
		<a class="yun_integral_bth">今日已签到</a>
		{yun:}else{/yun}
		<a href="javascript:void(0);" onClick="sign();" class="yun_integral_a" >去签到</a>
		{yun:}/if{/yun}
		</li>
		<li>
		<i class="yun_integral_icon yun_integral_icon_yq"></i>
		<div class="yun_integral_name">邀请好友注册</div>
		<div class="yun_integral_n">+{yun:}$config.integral_invite_reg{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun} </div>
			<a href="javascript:void(0);" onclick="inviteReg()" class="yun_integral_a">立即邀请</a>
		</li>
		<li>
		<i class="yun_integral_icon yun_integral_icon_ws"></i>
		<div class="yun_integral_name">完善基本资料</div>
		<div class="yun_integral_n">+{yun:}$config.integral_userinfo{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
		{yun:}if $statusList.baseInfo{/yun}
		<span class="yun_integral_bth">已完善</span>
		{yun:}else{/yun}
		<a href="index.php?c=info" class="yun_integral_a">立即完善</a>
		{yun:}/if{/yun}

		</li>

		<li>
		<i class="yun_integral_icon yun_integral_icon_sc"></i>
		<div class="yun_integral_name">上传头像</div>
		<div class="yun_integral_n"> +{yun:}$config.integral_avatar{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
		{yun:}if $statusList.photo{/yun}
		<span class="yun_integral_bth">已上传</span>
		{yun:}else{/yun}
		<a href="index.php?c=uppic" class="yun_integral_a">上传photo</a>
		{yun:}/if{/yun}
		</li>

		<li>
		<i class="yun_integral_icon yun_integral_icon_dl"></i>
		<div class="yun_integral_name">每天第一次登录</div>
		<div class="yun_integral_n">+{yun:}$config.integral_login{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
		<span class="yun_integral_bth">今日已登录</span>
		</li>

		<li>
		<i class="yun_integral_icon yun_integral_icon_rzyx"></i>
		<div class="yun_integral_name">认证电子邮箱</div>
		<div class="yun_integral_n">+{yun:}$config.integral_emailcert{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
		{yun:}if $statusList.emailChecked{/yun}
		<span class="yun_integral_bth">已认证</span>
		{yun:}else{/yun}
		<a href="index.php?c=bindingbox&type=email" class="yun_integral_a">邮箱认证</a>
		{yun:}/if{/yun}
		</li>
		<li>
		<i class="yun_integral_icon yun_integral_icon_rzsj"></i>
		<div class="yun_integral_name">认证手机号码</div>
		<div class="yun_integral_n">+{yun:}$config.integral_mobliecert{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
		{yun:}if $statusList.phoneChecked{/yun}
		<span class="yun_integral_bth">已验证</span>
		{yun:}else{/yun}
		<a href="index.php?c=bindingbox&type=moblie" class="yun_integral_a">手机验证</a>
		{yun:}/if{/yun}
		</li>
		<li>
		<i class="yun_integral_icon yun_integral_icon_rzz"></i>
		<div class="yun_integral_name">认证猎头执照</div>
		<div class="yun_integral_n">+{yun:}$config.integral_ltcert{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
		{yun:}if $statusList.yyzz{/yun}
		<span class="yun_integral_bth">已验证</span>
		{yun:}else{/yun}
		<a href="index.php?c=ltcert" class="yun_integral_a">去认证</a>
		{yun:}/if{/yun}
		</li>
        <li>
            <i class="yun_integral_icon yun_integral_icon_fbwt"></i>
            <div class="yun_integral_name">发布问题</div>
            <div class="yun_integral_n">+{yun:}$config.integral_question{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
            {yun:}if $statusList.question==false{/yun}
            <span class="yun_integral_bth">今日已发布</span> {yun:}else{/yun}
            <a href="{yun:}url m=wap c=ask a=addquestion{/yun}" class="yun_integral_a">发布问题</a>
            {yun:}/if{/yun}
        </li>
        <li>
            <i class="yun_integral_icon yun_integral_icon_hdwt"></i>
            <div class="yun_integral_name">回答问题</div>
            <div class="yun_integral_n">+{yun:}$config.integral_answer{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
            {yun:}if $statusList.answer==false{/yun}
            <span class="yun_integral_bth">今日已回答</span> {yun:}else{/yun}
            <a href="{yun:}url m=wap c='ask'{/yun}" class="yun_integral_a">回答问题</a>
            {yun:}/if{/yun}
        </li>
        <li>
            <i class="yun_integral_icon yun_integral_icon_plwt"></i>
            <div class="yun_integral_name">评论回答</div>
            <div class="yun_integral_n">+{yun:}$config.integral_answerpl{/yun}{yun:}$config.integral_priceunit{/yun}{yun:}$config.integral_pricename{/yun}</div>
            {yun:}if $statusList.answerpl==false{/yun}
            <span class="yun_integral_bth">今日已评论</span> {yun:}else{/yun}
            <a href="{yun:}url m=wap c='ask'{/yun}" class="yun_integral_a">评论回答</a>
            {yun:}/if{/yun}
        </li>
	</ul>
</div>
<div id="yunvue">
	<!--  邀请注册海报  -->
	<van-popup v-model="inviteRegHbShow" round closeable :style="{height:'90%',width:'90%',background:'none'}">
		<div class="hb_tc">
			<img :src="inviteRegHb" style="max-width: 100%;">
			<div class="hb_tc_bth">
				<div @click="getInviteRegHb()" class="hb_tc_hyz">换一张</div>
				<div class="hb_tc_bchb"> <span class="hb_tc_bchb_c" @click="inviteRegHbTipShow=!inviteRegHbTipShow" v-if="inviteRegHbTipShow"> <i class="hb_tc_bchbicon"></i>长按图片保存 </span></div>
			</div>
		</div>
	</van-popup>
</div>
<script>
	var wapurl = "{yun:}url m=wap{/yun}";
	var invite_reg_hbids = [];
	var yunvue = new Vue({
		el: '#yunvue',
		data: {
			inviteRegHbTipShow: true,
			inviteRegHbShow: false,
			inviteRegHbNext: 0,
			inviteRegHb: '',
		},
		computed: {
		},
		created() {
		},
		methods:{
			getInviteRegHbList: function() {
				let lr = false;
				$.ajax({
					type: 'post',
					url: wapurl + '?c=ajax&a=getInviteRegHbList',
					async: false,
					dataType: 'json',
					success: function(res){
						if(res && res.list && res.list.length > 0){
							res.list.forEach(item => {
								invite_reg_hbids.push(item.id);
							})

							lr = true;
						}
					}
				})
				return lr;
			},

			getInviteRegHb: function() {
				let that = this;
				var hbNum = invite_reg_hbids.length;
				var hb = that.inviteRegHbNext;

				if(hbNum == 0){
					var lr = that.getInviteRegHbList();
					if(!lr){
						showToast("功能无法使用，请联系网站客服", 2);
						return false;
					}
					hbNum = invite_reg_hbids.length; // 重新分配海报数量
				}

				showLoading('生成中...');
				const src = wapurl + '?c=ajax&a=getInviteRegHb&hb=' + invite_reg_hbids[hb];
				if (hb < (parseInt(hbNum) - 1)) {
					var next = hb + 1;
				} else {
					var next = 0;
				}

				var hbImg = new Image();
				hbImg.src = src;

				hbImg.onload = function(){
					hideLoading();
					that.inviteRegHbNext = next;
					that.inviteRegHb = hbImg.src;
					that.inviteRegHbShow = true;
				}
			}
		}
	});

	function inviteReg(){
		yunvue.getInviteRegHb();
	}

    var config = {
        url: '{yun:}$reg_url{/yun}',
        title: '邀请注册',
        desc: '#推荐得{yun:}$config.integral_pricename{/yun}，好礼尽情拿#只要成功推荐1位朋友注册，就可以兑换到礼品了！只要推荐{yun:}$config.integral_pricename{/yun}够给力，更有新iPad、iPod、音响、耳机、背包、笔记本等数万件礼品可尽情兑换！给我点力吧！注册成功你也可以获得礼品兑换{yun:}$config.integral_pricename{/yun}哦，赶快来参加吧！',
        img: '{yun:}$config.sy_ossurl{/yun}/{yun:}$config.sy_wx_sharelogo{/yun}',
        img_title: '邀请注册',
        from: '{yun:}$config.sy_webname{/yun}'
    };
</script>
<!--微信分享专用---->
<div style='margin:0 auto;width:0px;height:0px;overflow:hidden;'><img src="{yun:}$config.sy_ossurl{/yun}/{yun:}$config.sy_wx_sharelogo{/yun}"></div>
{yun:}if $smarty.get.c!='reward' && $smarty.get.a!='share' {/yun}
{yun:}include file="$wapstyle/nativeshare.htm"{/yun}
{yun:}/if{/yun}
</body></html> 